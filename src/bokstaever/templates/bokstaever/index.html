{% extends 'bokstaever/base.html' %}
{% load random_color %}
{% load bokstaever %}

{% block content %}
    <div class="overview">
    {% for post in object_list %}
        <div class="post">
            <div class="image">
                <svg viewBox="0 0 50 100" preserveAspectRatio="xMinYMax slice">
                    <defs>
                        <pattern id="img{{ post.image.pk }}" patternUnits="userSpaceOnUse" width="100" height="50">
                            <image xlink:href="{{ post.image.files.first.path.url }}" x="0" y="0" width="100%" height="50%" preserveAspectRatio="xMidYMid slice" />
                        </pattern>
                    </defs>
                    <polygon points="0,0 50,0 50,99.75 0,94.75" fill="url(#img{{ post.image.pk }})" />
                    <line x1="-0.5" x2="50.5" y1="94.75" y2="99.75" stroke="{% random_color %}" stroke-width="0.5" stroke-linecap="butt"/>
                </svg>
            </div>
            <div class="post-content">
                  <h2>{{ post.headline }}</h2>
                  <p>{{ post.text | truncatewords:60 }}</p>
                  <div class="footer">
                      {{ post.text | estimate_time }}, {{ post.published }} â†’
                  </div>
            </div>
        </div>
    {% endfor %}
    </div>
{% endblock content %}
